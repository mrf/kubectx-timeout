{"id":"kubectx-timeout-0c86","content_hash":"7ef1830ddebc4743ac3fd9d9cfd7133b08615c541c706f5d0c67029790477ab5","title":"Make shell detection explicit rather than automatic","description":"Improve reliability of shell detection during installation.\n\nCurrent Problem:\n- Auto-detection can be wrong ($SHELL vs actual shell)\n- Users might run bash but have $SHELL=zsh\n- Compatibility modes complicate detection\n- Users might use multiple shells\n\nRecommended Approach:\n- Make user explicitly choose: 'kubectx-timeout install-shell bash'\n- Provide clear error if no shell specified\n- Detect current shell and suggest it as default\n- Support installing for multiple shells if user wants\n\nShell Support:\n- bash (currently supported)\n- zsh (currently supported)\n- fish (add support)\n- Gracefully handle unknown shells\n\nUser Experience:\n- 'kubectx-timeout install-shell --detect' - suggest shell\n- 'kubectx-timeout install-shell bash' - install for bash\n- 'kubectx-timeout install-shell --all' - install for all detected shells\n- Clear confirmation of which shell profile was modified\n\nValidation:\n- Check that target shell profile file exists\n- Warn if shell binary not found\n- Test that integration loads correctly\n- Provide verification command after installation","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-13T17:13:03.663951-08:00","updated_at":"2025-11-13T17:15:08.078272-08:00","labels":["installation","shells"]}
{"id":"kubectx-timeout-1","content_hash":"ee2bb3aab22777607753d0de95264c0669fb3f076a300b29f938deba5c17dfbe","title":"Project Initialization and Documentation","description":"Initialize git repository, create README.md with project goals and overview, create LICENSE (choose appropriate open source license), create .gitignore for Go projects. This is the foundation for all other work.","status":"closed","priority":0,"issue_type":"chore","created_at":"2025-10-30T15:16:02.046638-07:00","updated_at":"2025-11-03T15:56:31.626098-08:00","closed_at":"2025-11-03T15:56:31.626101-08:00","labels":["mvp"]}
{"id":"kubectx-timeout-10","content_hash":"23648a3dcd2a9c40cb0a867c29737414d445b96e8419e4b651840c7895b7545d","title":"Add Installation Script and launchd Integration","description":"Create install.sh script: copy binary to /usr/local/bin, create ~/.kubectx-timeout directory, install example config, create launchd plist at ~/Library/LaunchAgents/com.kubectx-timeout.plist, configure shell integration (kubectl wrapper), provide uninstall.sh. Test on macOS Sonoma and later.","notes":"CLI-based installation via 'init' and 'install-shell' commands implemented. Launchd plist exists. TODO: decide between install.sh script vs. documenting CLI approach.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-10-30T15:18:26.68477-07:00","updated_at":"2025-11-04T16:04:44.261838-08:00","labels":["mvp"],"dependencies":[{"issue_id":"kubectx-timeout-10","depends_on_id":"kubectx-timeout-6","type":"blocks","created_at":"2025-10-30T15:18:26.686095-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-10","depends_on_id":"kubectx-timeout-7","type":"blocks","created_at":"2025-10-30T15:18:26.687027-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-10","depends_on_id":"kubectx-timeout-8","type":"blocks","created_at":"2025-10-30T15:18:26.687794-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-10","depends_on_id":"kubectx-timeout-9","type":"blocks","created_at":"2025-10-30T15:18:26.688583-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-11","content_hash":"09e0dd318ef4e74bdeadc16d2f5473fbfd3979650e5121aeaa804dc4a9da4886","title":"Add CLI Interface and Subcommands","description":"Build CLI using cobra/cli library: 'kubectx-timeout status' (show current state, last activity, time until timeout), 'kubectx-timeout start/stop' (control daemon), 'kubectx-timeout reload' (reload config), 'kubectx-timeout reset' (reset activity timer), 'kubectx-timeout version'. Include --help and --verbose flags.","notes":"Basic CLI implemented (no cobra). Has: version, daemon, status, init, install-shell. Missing: start/stop (use daemon), reload, reset. Decide if current approach acceptable.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-10-30T15:18:32.408893-07:00","updated_at":"2025-11-04T16:04:38.799021-08:00","labels":["deferred"],"dependencies":[{"issue_id":"kubectx-timeout-11","depends_on_id":"kubectx-timeout-9","type":"blocks","created_at":"2025-10-30T15:18:32.40988-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-12","content_hash":"d6bd524a7eb9f426732628506bfff78827d0c8a014b1f4636312158bede9e450","title":"Add Notification System","description":"Implement user notifications when timeout occurs: macOS native notifications using osascript/terminal-notifier, terminal message output, optional Slack/webhook integration. Make notifications configurable (enable/disable, format). Use Go's os/exec for notification delivery.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-10-30T15:18:36.688473-07:00","updated_at":"2025-11-03T14:37:55.619089-08:00","labels":["deferred"],"dependencies":[{"issue_id":"kubectx-timeout-12","depends_on_id":"kubectx-timeout-9","type":"blocks","created_at":"2025-10-30T15:18:36.689605-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-1293","content_hash":"c1505c7c07341bddc238cf12d617533d8f20df9908608a3d30800ce8aa3d6113","title":"Manual kubectx invocation should start timeout timer","description":"When a user manually runs kubectx (not via the wrapper), the timeout timer should start. This is a regression - needs test coverage and implementation.","status":"closed","priority":1,"issue_type":"bug","assignee":"@me","created_at":"2025-11-05T14:57:33.980309-08:00","updated_at":"2025-11-05T15:00:07.371939-08:00","closed_at":"2025-11-05T15:00:07.371939-08:00","labels":["completed","mvp","regression","tdd","testing"]}
{"id":"kubectx-timeout-13","content_hash":"5672906e8b2cbeceb541c9bc7f6e6c023a3e39c9669d97bfcf6ef73a0505df1b","title":"Implement Safety Checks and Edge Case Handling","description":"Add critical safety mechanisms: detect active kubectl operations (check for kubectl processes), prevent switching during active operations, validate target context exists before switching, handle network failures gracefully, add dry-run mode, implement logging (structured logging with levels). Prevent data loss or cluster disruption.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-10-30T15:18:51.195504-07:00","updated_at":"2025-11-03T14:37:55.724485-08:00","labels":["deferred"],"dependencies":[{"issue_id":"kubectx-timeout-13","depends_on_id":"kubectx-timeout-9","type":"blocks","created_at":"2025-10-30T15:18:51.196707-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-14","content_hash":"3401f42172eb63e03a4b591f93ae3da9654704ff9be4276ededd4c9a1e8d2790","title":"Write Unit Tests","description":"Comprehensive unit test coverage using Go's testing package: test config loading/validation, timeout calculation logic, state file read/write, context switching logic, signal handling, error cases. Aim for 80%+ code coverage. Use table-driven tests. Mock external dependencies (kubectl, file system).","notes":"1,225 lines of unit tests written. Coverage: 60.8%. Remaining: increase to 80%, add cmd/ coverage.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-10-30T15:19:03.674573-07:00","updated_at":"2025-11-04T16:04:10.928673-08:00","labels":["mvp","testing"],"dependencies":[{"issue_id":"kubectx-timeout-14","depends_on_id":"kubectx-timeout-6","type":"blocks","created_at":"2025-10-30T15:19:03.676453-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-14","depends_on_id":"kubectx-timeout-7","type":"blocks","created_at":"2025-10-30T15:19:03.677195-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-14","depends_on_id":"kubectx-timeout-8","type":"blocks","created_at":"2025-10-30T15:19:03.678316-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-14","depends_on_id":"kubectx-timeout-9","type":"blocks","created_at":"2025-10-30T15:19:03.679086-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-15","content_hash":"4644a3fb41114d2ec6ba423ad384e634a9834da625deb8cc3636cdad0f8fc640","title":"Write Integration Tests","description":"End-to-end integration tests: test full daemon lifecycle (start, run, stop), test actual context switching with real kubectl, test timeout scenarios with controlled timing, test config reload, test signal handling, test error recovery. Run in isolated test environment. Use testify or similar framework.","notes":"MVP SCOPE: Basic integration tests only. Test daemon lifecycle (start/stop), real kubectl integration (using test contexts), config reload (SIGHUP), simple failure scenarios. No load testing, no stress testing - this is a local tool. Focus on happy path and common error cases.","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-30T15:19:08.201136-07:00","updated_at":"2025-11-03T14:38:32.277793-08:00","labels":["mvp","testing"],"dependencies":[{"issue_id":"kubectx-timeout-15","depends_on_id":"kubectx-timeout-14","type":"blocks","created_at":"2025-10-30T15:19:08.202796-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-16","content_hash":"c22e163d7373a42e47b0a7739ba1e3831723713a5f2043f3c73732ffccc64b90","title":"Write Comprehensive User Documentation","description":"Create detailed README.md: project overview and motivation, installation instructions (Homebrew, manual), configuration guide with examples, usage examples and common workflows, CLI reference, troubleshooting section, FAQ. Include architecture diagram. Add CONTRIBUTING.md for contributors.","notes":"README.md complete with quick start and architecture. Config examples done. TODO: add troubleshooting section.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-10-30T15:19:19.857999-07:00","updated_at":"2025-11-04T16:04:33.348889-08:00","labels":["documentation","mvp"],"dependencies":[{"issue_id":"kubectx-timeout-16","depends_on_id":"kubectx-timeout-10","type":"blocks","created_at":"2025-10-30T15:19:19.859633-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-16","depends_on_id":"kubectx-timeout-11","type":"blocks","created_at":"2025-10-30T15:19:19.860319-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-17","content_hash":"b19d3ed2bc2958e06f05789bdc73d22a46424d8602bc42d5a438314f06ea5ddd","title":"Add Example Configurations and Templates","description":"Create example config files for common scenarios: basic setup (single timeout), multi-context setup (different timeouts per context), enterprise setup (production safeguards), local development setup. Add config.example.yaml with extensive comments explaining each option. Include in examples/ directory.","status":"open","priority":4,"issue_type":"task","created_at":"2025-10-30T15:19:25.543643-07:00","updated_at":"2025-11-03T14:37:55.831424-08:00","labels":["deferred","documentation"],"dependencies":[{"issue_id":"kubectx-timeout-17","depends_on_id":"kubectx-timeout-6","type":"blocks","created_at":"2025-10-30T15:19:25.545448-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-17","depends_on_id":"kubectx-timeout-16","type":"blocks","created_at":"2025-10-30T15:19:25.546179-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-18","content_hash":"5e07083ebd31c091e8109683b8497336437e1fc807db686eb015480a001d9741","title":"Create Release Packaging and Distribution","description":"Set up release automation: create Homebrew formula (tap), GoReleaser configuration for multi-platform builds, GitHub releases with binaries, versioning strategy (semantic versioning), changelog automation. Create scripts/release.sh. Consider apt/yum packages for Linux future support.","status":"open","priority":4,"issue_type":"task","created_at":"2025-10-30T15:19:30.845854-07:00","updated_at":"2025-11-03T14:37:55.933266-08:00","labels":["deferred","distribution"],"dependencies":[{"issue_id":"kubectx-timeout-18","depends_on_id":"kubectx-timeout-14","type":"blocks","created_at":"2025-10-30T15:19:30.847349-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-18","depends_on_id":"kubectx-timeout-15","type":"blocks","created_at":"2025-10-30T15:19:30.848068-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-18","depends_on_id":"kubectx-timeout-16","type":"blocks","created_at":"2025-10-30T15:19:30.848754-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-19","content_hash":"1625fa0175e99b2b5c32949a37ed9f0b34e5459dd792eec263c4527fb6d71138","title":"Set Up CI/CD Pipeline with Quality Gates","description":"Configure GitHub Actions workflow for continuous integration. Pipeline should run on every PR and include: go fmt/goimports check, golangci-lint with 30+ linters, unit tests with race detector, coverage report with 80% threshold enforcement, gosec security scanning, govulncheck for vulnerabilities. Add pre-commit hook script for local development. This ensures code quality before merge. Practical for local CLI tool - no deployment pipelines needed, just quality checks.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-03T14:38:41.813237-08:00","updated_at":"2025-11-03T16:23:45.353141-08:00","closed_at":"2025-11-03T16:23:45.353144-08:00","labels":["mvp"],"dependencies":[{"issue_id":"kubectx-timeout-19","depends_on_id":"kubectx-timeout-2","type":"blocks","created_at":"2025-11-03T14:38:41.81451-08:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-1904","content_hash":"530d148f359920a907ece24fe13a8bde76a78e8d18b1bc7c818b25758d4f8127","title":"Add fswatch monitoring as backup detection mechanism","description":"Implement fswatch monitoring of ~/.kube/config to detect context switches from any tool (IDE plugins, kubectx, GUI tools). This complements the shell wrapper by catching context switches that happen outside the shell.\n\nImplementation:\n- Add watchKubeconfig() function to daemon\n- Use fswatch on macOS (FSEvents API)\n- Gracefully degrade if fswatch not available\n- Treat context switches as activity (start/extend timeout)\n- Run in separate goroutine alongside timeout checking\n\nRationale:\n- Both architect and greybeard agreed this provides valuable redundancy\n- Catches context switches from GUI tools, IDE plugins\n- Provides defense-in-depth coverage\n- Minimal complexity increase for significant reliability gain","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-13T17:11:57.416283-08:00","updated_at":"2025-11-18T09:05:10.459387-08:00","closed_at":"2025-11-18T09:05:10.459401-08:00","labels":["enhancement","monitoring"]}
{"id":"kubectx-timeout-2","content_hash":"d54cf766fb42d5ba4658cb5d16e4324676105e8c3a4bd384f8efde0f30c8a532","title":"Go Project Setup and Module Initialization","description":"Initialize Go module (go mod init), set up project structure (cmd/, internal/, pkg/), create main.go entry point, configure Go version and dependencies. Decision: Using Go for single-binary distribution, launchd integration, and efficient daemon operation on macOS.","status":"closed","priority":0,"issue_type":"chore","created_at":"2025-10-30T15:17:30.968413-07:00","updated_at":"2025-11-03T16:18:01.035271-08:00","closed_at":"2025-11-03T16:18:01.035283-08:00","labels":["mvp"]}
{"id":"kubectx-timeout-20","content_hash":"9dd76b6145b0ea12f6f1b46d4c5f79535e4bd416e389a2195d2d15be3ae8d979","title":"Add Security Testing for Input Validation","description":"Write security-focused tests for critical attack vectors relevant to a local daemon: command injection prevention (test context names with special chars, ensure exec.Command used correctly), file permission verification (config/state files must be 0600), path traversal prevention (no user input in file paths), YAML parsing safety (test malformed YAML, large files), log sanitization (ensure no kubectl output with secrets logged). Use gosec in CI. Focus on practical security for local tool - no network security, no auth/authz needed. Test with malicious input to verify safe failure.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-03T14:38:51.453599-08:00","updated_at":"2025-11-03T17:12:37.142188-08:00","closed_at":"2025-11-03T17:12:37.142192-08:00","labels":["mvp"],"dependencies":[{"issue_id":"kubectx-timeout-20","depends_on_id":"kubectx-timeout-9","type":"blocks","created_at":"2025-11-03T14:38:51.454685-08:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-21","content_hash":"670f47454c53e42ebce6440d3782a87167f3cc40a25892989a80364d7ca72652","title":"Implement Basic Logging and Observability","description":"Add structured logging using standard library log/slog (Go 1.21+) or logrus. Log levels: DEBUG (tick events, state reads), INFO (startup, shutdown, context switches), WARN (retries, degraded mode), ERROR (failures). Include context in logs (timestamp, pid, version). Write to ~/.kubectx-timeout/daemon.log with simple rotation (keep last 5x10MB files). Provide 'status' command showing daemon health, last activity, time until timeout. Keep it simple - this is for debugging, not production monitoring. No metrics, no external monitoring integration needed for MVP.","notes":"Basic logging implemented with log.Logger. Config schema done. TODO: migrate to slog, add rotation, implement level filtering.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-11-03T14:39:00.86354-08:00","updated_at":"2025-11-04T16:04:21.885803-08:00","labels":["mvp"],"dependencies":[{"issue_id":"kubectx-timeout-21","depends_on_id":"kubectx-timeout-8","type":"blocks","created_at":"2025-11-03T14:39:00.86467-08:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-3","content_hash":"1faaf2ef9e712399e42c350ae4ffd16d9a3b46cf41bf8273251f525ea139ed5b","title":"Design Configuration Schema","description":"Design YAML configuration schema for: timeout durations (global and per-context), default fallback context, context-specific settings, enable/disable flags. Create example config with comments. Use Go's yaml.v3 for parsing.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-30T15:17:36.71159-07:00","updated_at":"2025-11-03T16:21:52.076184-08:00","closed_at":"2025-11-03T16:21:52.07619-08:00","labels":["mvp"],"dependencies":[{"issue_id":"kubectx-timeout-3","depends_on_id":"kubectx-timeout-2","type":"blocks","created_at":"2025-10-30T15:17:36.712703-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-325d","content_hash":"513803c25e8e5eb1fb7f2908ed55ac65621952526d1b91236c3e828450d311a0","title":"Optimize daemon timeout checking mechanism","description":"Choose efficient approach for daemon to monitor activity timestamps.\n\nCurrent Implementation Analysis:\n- Daemon needs to check if timeout has expired\n- Check interval: 30 seconds (configurable)\n- Read state file to get last activity timestamp\n\nOptions:\n\n1. Polling (Current/Simple):\n   - Check state file every N seconds\n   - Pros: Simple, reliable, no dependencies\n   - Cons: Battery usage on laptops, slight latency\n   - Good enough for dev machines with 30s interval\n\n2. fsnotify/inotify (Reactive):\n   - Watch state file for modifications\n   - Pros: Immediate response, efficient\n   - Cons: More complex, additional dependency\n   - Overkill for timeout checking (not time-critical)\n\nRecommendation for Dev Machines:\n- Keep polling approach (KISS principle)\n- Default check interval: 30 seconds\n- Make interval configurable\n- Optimize: only read file if mtime changed\n- Add sleep backoff when no activity\n\nBattery Optimization:\n- Don't wake up more than necessary\n- Use file mtime check before full read\n- Longer intervals acceptable (30-60s)\n- Not time-critical (safety tool, not real-time monitoring)\n\nDocumentation:\n- Document checking interval and how to configure it\n- Explain battery impact (minimal with 30s polling)\n- Show how to check daemon is running","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-13T17:13:22.926674-08:00","updated_at":"2025-11-13T17:15:26.45863-08:00","labels":["daemon","optimization"]}
{"id":"kubectx-timeout-3952","content_hash":"6c85d00761a0f027e1534869672fd267d6b6b016d886440c041a0d5f5a782b06","title":"Improve installation UX with interactive prompts and verification","description":"Make shell integration installation more user-friendly and robust.\n\nInteractive Installation:\n- Auto-detect user's shell (bash/zsh/fish)\n- Show what will be added to shell profile before modifying\n- Prompt for confirmation\n- Offer to reload shell automatically\n- Clear success/error messages\n\nVerification:\n- Add VerifyInstallation() function\n- Check that profile contains integration marker\n- Test that kubectl wrapper function is defined\n- Verify wrapper calls correct binary path\n- Provide troubleshooting guidance if verification fails\n\nUser Experience:\n- Handle complex shell configs (oh-my-zsh, frameworks)\n- Warn about potential conflicts\n- Document order-of-sourcing considerations\n- Make it easy to understand what was installed\n\nRationale:\n- Installation is currently more complex than it needs to be\n- Users need confidence that installation worked\n- Better UX will reduce support burden","status":"closed","priority":1,"issue_type":"feature","assignee":"@me","created_at":"2025-11-13T17:12:12.749736-08:00","updated_at":"2025-11-14T12:41:26.10407-08:00","closed_at":"2025-11-14T12:41:26.10407-08:00","labels":["enhancement","ux"]}
{"id":"kubectx-timeout-3b19","content_hash":"528549f7c4c19c41f6a123b70c3fc84231994ab39d5f6539a0f214b4757d2533","title":"Add Linux support","description":"Currently kubectx-timeout is developed and tested primarily on macOS. Add proper Linux support including:\\n- Testing on common Linux distributions (Ubuntu, Fedora, Arch)\\n- Verify kubectl context switching works correctly on Linux\\n- Handle any platform-specific differences in timeout behavior\\n- Update installation instructions for Linux users\\n- Add Linux CI testing if not already present","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-17T17:23:42.291314-08:00","updated_at":"2025-11-17T17:23:42.291314-08:00"}
{"id":"kubectx-timeout-4","content_hash":"e08ca4ca2af719728d02a41349923b83c20eaac1cbbfcfd064142d3f6fc6c9ac","title":"Design State Tracking Mechanism","description":"Design how to track last kubectl command execution time. Options: 1) File-based timestamp in ~/.kubectx-timeout/state.json, 2) Wrap kubectl command with shell function/alias, 3) Monitor kubectl processes. Decision needed: file-based is simplest and most reliable for daemon architecture.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-10-30T15:17:42.02319-07:00","updated_at":"2025-11-03T16:46:44.705024-08:00","closed_at":"2025-11-03T16:46:44.705031-08:00","labels":["deferred"],"dependencies":[{"issue_id":"kubectx-timeout-4","depends_on_id":"kubectx-timeout-2","type":"blocks","created_at":"2025-10-30T15:17:42.024173-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-4528","content_hash":"907fe37b83ae0288e600c21f579136c1d60b9d4b9e8d06da2024c92bd279da28","title":"Handle state file location and permissions gracefully","description":"Ensure state file operations work reliably on local dev machines.\n\nState File Location:\n- XDG_STATE_HOME already implemented (~/.local/state/kubectx-timeout/)\n- Document where state files are stored\n- Create state directory with correct permissions (0700)\n- Handle case where directory doesn't exist\n\nPermission Handling:\n- State file: 0600 (user read/write only)\n- State directory: 0700 (user access only)\n- Temp files during atomic writes: 0600\n- Clear error messages if permissions wrong\n\nEdge Cases for Dev Machines:\n- Graceful handling if state file is locked (editor open, etc.)\n- Quick timeout on file operations (don't hang)\n- Log warnings but don't crash if write fails\n- Document state file format for troubleshooting\n\nError Messages:\n- If can't create directory: suggest checking permissions\n- If can't write file: check disk space, permissions\n- If state file corrupted: offer to reset\n- Clear recovery instructions\n\nNote: This is local filesystem only (no NFS/network mounts to worry about on dev machines)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-13T17:12:47.415482-08:00","updated_at":"2025-11-13T17:14:51.844006-08:00","labels":["filesystem","reliability"]}
{"id":"kubectx-timeout-5","content_hash":"0e449a5eeb4b5044610ca924e74d03bcf5d21988c3cf7c43eab2f5f0bc7eedb7","title":"Design Daemon and Timeout Detection Strategy","description":"Design Go daemon architecture: main loop with time.Ticker, signal handling (SIGHUP for config reload, SIGTERM for graceful shutdown), timeout detection logic, context switching triggers. Plan launchd plist configuration for macOS LaunchAgent integration.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-10-30T15:17:48.697885-07:00","updated_at":"2025-11-03T16:52:23.566263-08:00","closed_at":"2025-11-03T16:52:23.566267-08:00","labels":["deferred"],"dependencies":[{"issue_id":"kubectx-timeout-5","depends_on_id":"kubectx-timeout-2","type":"blocks","created_at":"2025-10-30T15:17:48.699075-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-5","depends_on_id":"kubectx-timeout-4","type":"blocks","created_at":"2025-10-30T15:17:48.699911-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-52e3","content_hash":"d66c082af3d1cc26f463a2675c566917c33715a1d7a73bfb1f7b2222c9a74936","title":"Refactor TestKubectxWrapperIntegrationSuccess() to reduce cyclomatic complexity","description":"Function TestKubectxWrapperIntegrationSuccess() in internal/tracker_integration_test.go:149 has complexity of 23, exceeding the threshold of 15. Break this test function into smaller helper functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-19T11:48:25.646627-08:00","updated_at":"2025-11-19T11:48:25.646627-08:00","labels":["code-quality","gocyclo","refactor","testing"]}
{"id":"kubectx-timeout-54c3","content_hash":"040156ee1e981b0369f7b59e2ea3baa668872b76ae76f3446f1f04c005e469bb","title":"Refactor TestInstallAndUninstallIntegration() to reduce cyclomatic complexity","description":"Function TestInstallAndUninstallIntegration() in internal/shell_test.go:264 has complexity of 19, exceeding the threshold of 15. Break this test function into smaller helper functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-19T11:48:25.123497-08:00","updated_at":"2025-11-19T11:48:25.123497-08:00","labels":["code-quality","gocyclo","refactor","testing"]}
{"id":"kubectx-timeout-5f28","content_hash":"78f95470b27aa57032c6526275378af4ca9285f4c35e87a2ee564c0c3c92afb1","title":"Refactor TestKubectlWrapperIntegration() to reduce cyclomatic complexity","description":"Function TestKubectlWrapperIntegration() in internal/tracker_integration_test.go:18 has complexity of 23, exceeding the threshold of 15. Break this test function into smaller helper functions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-19T11:48:26.299505-08:00","updated_at":"2025-11-19T11:48:26.299505-08:00","labels":["code-quality","gocyclo","refactor","testing"]}
{"id":"kubectx-timeout-6","content_hash":"2c8e8aec201179251c6ffb690a78001d1ab7c371018fa68c2c08d1934fe8172e","title":"Implement Configuration Loader","description":"Build Go package for config file loading: parse YAML from ~/.kubectx-timeout/config.yaml, validate schema, provide defaults, handle missing file gracefully, support config reload. Use gopkg.in/yaml.v3. Include unit tests.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-10-30T15:17:59.846538-07:00","updated_at":"2025-11-03T16:36:35.934332-08:00","closed_at":"2025-11-03T16:36:35.934342-08:00","labels":["deferred"],"dependencies":[{"issue_id":"kubectx-timeout-6","depends_on_id":"kubectx-timeout-3","type":"blocks","created_at":"2025-10-30T15:17:59.847824-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-633c","content_hash":"f22167b2beccc858219e163b4b9bcd68410a167cec8f537e3921d1f33a096906","title":"Move config location to XDG Base Directory standard","description":"Move configuration from ~/.kubectx-timeout to ~/.config/kubectx-timeout to follow XDG Base Directory specification (modern standard). This involves:\n- Update config path detection to use $XDG_CONFIG_HOME or default to ~/.config/kubectx-timeout\n- Update state file path to use $XDG_STATE_HOME or default to ~/.local/state/kubectx-timeout\n- Provide migration path for existing users (auto-detect and move old config on first run)\n- Update all documentation and examples\n- Ensure backward compatibility during transition\n- Update launchd plist paths\n- Update shell integration paths\n\nBenefits: Follows modern Unix standards, keeps home directory cleaner, aligns with other modern CLI tools.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-03T17:36:08.105501-08:00","updated_at":"2025-11-05T15:42:40.376463-08:00","closed_at":"2025-11-05T15:42:40.376463-08:00"}
{"id":"kubectx-timeout-7","content_hash":"4e22d156c3ef5e0c3dd69f5edb45b960d074cda1b47ad1a2533a9f9cde4cc5a5","title":"Implement Activity Tracker","description":"Build Go package to track kubectl command activity: write timestamp to ~/.kubectx-timeout/state.json on kubectl use, provide shell function/alias wrapper for kubectl, read last activity time, handle concurrent access with file locking. Include integration with shell profiles (.bashrc, .zshrc).","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-30T15:18:05.206507-07:00","updated_at":"2025-11-03T16:49:02.398077-08:00","closed_at":"2025-11-03T16:49:02.398082-08:00","labels":["mvp"],"dependencies":[{"issue_id":"kubectx-timeout-7","depends_on_id":"kubectx-timeout-4","type":"blocks","created_at":"2025-10-30T15:18:05.207714-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-751e","content_hash":"a6d5ca850b7e2f905f5350bc9a986776de656e75c9c99ca6e62af13617f24b6d","title":"Check for config file on daemon startup and guide user to run init","description":"When daemon starts and no config file exists at ~/.config/kubectx-timeout/config.yaml, the daemon should:\n1. Detect missing config file\n2. Provide clear error message with guidance\n3. Either:\n   - Recommend running 'kubectx-timeout init' to create config\n   - OR auto-run with sensible defaults (decide which is better UX)\n   - OR fail fast with helpful error message\n\nCurrently the daemon may fail silently or use defaults without user knowing.\n\nDecision needed:\n- Fail fast and require init? (more explicit, safer)\n- Auto-generate minimal config? (more convenient, but surprising)\n- Run with hardcoded defaults? (could be confusing)\n\nRecommendation: Fail fast with clear message pointing to init command.\n\nFiles to modify:\n- cmd/kubectx-timeout/main.go - check config exists before NewDaemon\n- internal/config.go - maybe add a ValidateConfigExists() function\n\nExample error message:\n'Config file not found at ~/.config/kubectx-timeout/config.yaml\nPlease run: kubectx-timeout init\nOr create config manually (see examples/config.minimal.yaml)'","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-05T16:51:12.328219-08:00","updated_at":"2025-11-05T16:51:12.328219-08:00"}
{"id":"kubectx-timeout-7e07","content_hash":"77353f364c382f969ae1f52dca9caa652ad8917a61d65f060853977a26e8c2a6","title":"Implement daemon lifecycle management with launchd","description":"Add proper daemon startup and management for macOS dev machines.\n\nmacOS/launchd Integration:\n- Create launchd plist template for user agent\n- Install to ~/Library/LaunchAgents/\n- Commands: start, stop, restart, status\n- Auto-start on login (optional)\n- Graceful shutdown handling\n\nDeveloper Experience:\n- Simple 'kubectx-timeout daemon install' command\n- Check if daemon is already running before starting new instance\n- Single daemon instance enforcement (prevent duplicates)\n- Easy daemon status checking\n- Log location documentation\n\nGraceful Degradation:\n- Support manual daemon execution for testing\n- Don't require daemon for basic functionality\n- Clear error messages if daemon won't start\n\nNote: This is for local dev machines, not production servers. Focus on simplicity over enterprise features.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-13T17:12:31.18413-08:00","updated_at":"2025-11-13T17:14:35.928832-08:00","labels":["daemon","macos"]}
{"id":"kubectx-timeout-7e36","content_hash":"42b09680f02873dacdc3b119cdfa9253cf30093bdcd0f8c82dee04760307af7f","title":"Add Go coverage report badge to README","description":"Add a test coverage badge to the README.md to display the current code coverage percentage.\n\nREQUIREMENT: The solution must work entirely within GitHub Actions - NO external services like codecov.io or coveralls.io should be used.\n\nImplementation approach:\n- Generate coverage report using 'go test -coverprofile=coverage.out ./...'\n- Calculate coverage percentage from the coverage.out file\n- Generate a coverage badge (either as SVG or using shields.io dynamic badge)\n- Update the README with the badge\n- All of this should happen in the GitHub Actions workflow\n\nTechnical details:\n- Parse coverage.out to extract percentage (can use awk/sed or go tool cover -func)\n- Generate SVG badge file or use shields.io endpoint badge\n- Commit badge file to repository (if using SVG) or use dynamic badge URL\n- Update README.md with badge markdown\n- Ensure badge updates automatically on each CI run\n\nPlacement:\n- Add badge section near top of README after overview\n- Group with other project badges (if any added later)\n- Badge should show percentage and ideally use color coding (red/yellow/green)\n\nPrerequisites:\n- CI pipeline must generate coverage data (already done in GitHub Actions)\n- No external service signup required\n- No service tokens needed\n- Everything self-contained in repository and GitHub Actions","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-14T13:14:23.519204-08:00","updated_at":"2025-11-14T13:16:13.028945-08:00"}
{"id":"kubectx-timeout-8","content_hash":"27d62e90182006abf47c3cad0995bd1a66119a61ab3f66e05d240f512b8954a6","title":"Implement Timeout Monitor Daemon","description":"Build core daemon logic in Go: main event loop with time.Ticker (configurable interval), read last activity from state file, compare against configured timeout, trigger context switch when timeout exceeded, handle signal interrupts (SIGHUP, SIGTERM, SIGINT), graceful shutdown. This is the heart of the system.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-30T15:18:09.916865-07:00","updated_at":"2025-11-03T16:54:10.89908-08:00","closed_at":"2025-11-03T16:54:10.899087-08:00","labels":["mvp"],"dependencies":[{"issue_id":"kubectx-timeout-8","depends_on_id":"kubectx-timeout-5","type":"blocks","created_at":"2025-10-30T15:18:09.918115-07:00","created_by":"mark.ferree"},{"issue_id":"kubectx-timeout-8","depends_on_id":"kubectx-timeout-7","type":"blocks","created_at":"2025-10-30T15:18:09.919024-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-8d5b","content_hash":"69845cafe888ba64c83f4ca06e946f5cd31dc24b07a8b33d7df0b7b46e80ceba","title":"Auto-background daemon on start command","description":"When running 'kubectx-timeout daemon start', the daemon should automatically background itself (similar to how other daemon tools work). Currently users need to manually append '\u0026' to background the process. This would improve UX and align with daemon conventions.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-17T13:24:50.449965-08:00","updated_at":"2025-11-17T13:24:50.449965-08:00","labels":["daemon","ux"]}
{"id":"kubectx-timeout-9","content_hash":"a00c9eca720606e4fdc23bcb539021e36051977c24bc34193a401eb04f4377e2","title":"Implement Safe Context Switcher","description":"Build Go package for safe kubectl context switching: validate target context exists (kubectl config get-contexts), use kubectl config use-context command, handle errors gracefully, add retry logic, prevent switching to already-active context, log all switches. Integrate with timeout monitor.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-10-30T15:18:14.393568-07:00","updated_at":"2025-11-03T17:01:51.324492-08:00","closed_at":"2025-11-03T17:01:51.324503-08:00","labels":["mvp"],"dependencies":[{"issue_id":"kubectx-timeout-9","depends_on_id":"kubectx-timeout-8","type":"blocks","created_at":"2025-10-30T15:18:14.394559-07:00","created_by":"mark.ferree"}]}
{"id":"kubectx-timeout-901c","content_hash":"53ba446b008b3e8fccd8ad730b014b6a92c575388294c27a4c57f23749c0f8ce","title":"Add Go Report Card badge to README","description":"Add a Go Report Card badge to the README.md to display code quality grade from goreportcard.com.\n\nImplementation:\n- Go Report Card (goreportcard.com) is a free service that analyzes Go code quality\n- It checks: gofmt, go vet, gocyclo, golint, ineffassign, license, misspell\n- Add badge markdown to README (likely near top after title/description)\n- Badge format: [![Go Report Card](https://goreportcard.com/badge/github.com/USERNAME/kubectx-timeout)](https://goreportcard.com/report/github.com/USERNAME/kubectx-timeout)\n- Update USERNAME to actual GitHub username/org\n\nPlacement:\n- Add badge section near top of README after overview\n- Group with other project badges (coverage, build status, etc.)\n- Badge links to detailed report on goreportcard.com\n\nBenefits:\n- Shows code quality at a glance\n- Encourages best practices\n- No setup required - service automatically scans public GitHub repos\n- Updates automatically when code changes\n\nPrerequisites:\n- Repository must be public on GitHub\n- No registration or configuration needed","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-14T13:14:28.981843-08:00","updated_at":"2025-11-18T09:05:19.27258-08:00","closed_at":"2025-11-18T09:05:19.272585-08:00"}
{"id":"kubectx-timeout-a174","content_hash":"c7bd870d95f155b34babe3427743a53342ff470be59b2188ddea562f107479af","title":"Daemon incorrectly uses stale activity data on startup","description":"When daemon starts, it immediately checks against old activity timestamps and switches contexts. The daemon should either: 1) Reset activity timer on startup, 2) Wait for first activity before starting timeout checks, or 3) Detect manual context switches while daemon was down. Current behavior: daemon starts -\u003e reads 46h old timestamp -\u003e immediately switches context. This is wrong.","status":"closed","priority":0,"issue_type":"bug","assignee":"@me","created_at":"2025-11-05T15:05:28.848068-08:00","updated_at":"2025-11-05T15:10:47.803298-08:00","closed_at":"2025-11-05T15:10:47.803298-08:00","labels":["critical","daemon","mvp"]}
{"id":"kubectx-timeout-cd1e","content_hash":"295d7b2bb77ad98f12dbd4a0267a7d581f7c39ce0dd54c4ca52bd137952b5f84","title":"Shell function definition prints to terminal on startup","description":"The _kubectx_timeout_kubectl() function definition is being echoed/printed every time a new terminal window is opened. This happens when sourcing the shell integration script. The function should be defined silently without any output to the terminal.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-11-17T13:23:23.322663-08:00","updated_at":"2025-11-17T13:23:23.322663-08:00","labels":["integration","shell"]}
{"id":"kubectx-timeout-d87a","content_hash":"497c6d149ec380910b4abecdad292d91e9b1fa109c4464778b17813e3492a15b","title":"Refactor cmdInstallShell() to reduce cyclomatic complexity","description":"Function cmdInstallShell() in cmd/kubectx-timeout/main.go:230 has complexity of 23, exceeding the threshold of 15. Break this function into smaller, more maintainable units.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-19T11:48:24.607187-08:00","updated_at":"2025-11-19T11:48:24.607187-08:00","labels":["code-quality","gocyclo","refactor"]}
{"id":"kubectx-timeout-eafb","content_hash":"7aa14330363e3b078c20314d330df778e88024ad71491d529b7bb1adc9fdaede","title":"Implement clean uninstallation process","description":"Provide easy, complete removal of kubectx-timeout from the system.\n\nUninstallation Steps:\n1. Stop and remove daemon (if running)\n   - Stop launchd agent\n   - Remove plist from ~/Library/LaunchAgents/\n   - Kill any running daemon processes\n\n2. Remove shell integration\n   - Detect which shell profiles have integration\n   - Remove kubectx-timeout sections from profiles\n   - Use marker comments to identify what to remove\n   - Backup profile before modification\n\n3. Clean up state/config files\n   - Optionally remove state directory (~/.local/state/kubectx-timeout/)\n   - Optionally remove config directory (~/.config/kubectx-timeout/)\n   - Ask user if they want to keep configs (for reinstall)\n\n4. Remove binary (optional)\n   - Offer to remove /usr/local/bin/kubectx-timeout\n   - Or document manual removal\n\nCommand Design:\n- 'kubectx-timeout uninstall' - interactive with prompts\n- 'kubectx-timeout uninstall --all' - remove everything\n- 'kubectx-timeout uninstall --keep-config' - keep configs\n- Show what will be removed before doing it\n- Require confirmation for destructive operations\n\nVerification:\n- After uninstall, verify nothing left in:\n  - Shell profiles (grep for 'kubectx-timeout')\n  - LaunchAgents directory\n  - Running processes (ps)\n- Report what was removed and what remains\n\nEdge Cases:\n- User manually edited shell integration - warn, don't break\n- Multiple shell integrations installed\n- Daemon not running - clean up anyway\n- Missing files - don't error, just skip\n\nDocumentation:\n- README section on uninstallation\n- Troubleshooting for partial removal\n- How to manually clean up if command fails","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-13T17:13:45.945355-08:00","updated_at":"2025-11-13T17:15:45.457571-08:00","labels":["cleanup","installation"]}
{"id":"kubectx-timeout-f7b8","content_hash":"b2e1d7b479253ed8a0eb8956204cacda9314896c75dcf8c577179ea61d1ec8e9","title":"Track k9s and kubectl usage and rethink command wrapper architecture","description":"## Problem\n\nCurrently the project focuses on kubectl context switching with timeout, but there are broader considerations:\n\n1. **k9s Integration**: k9s is a popular Kubernetes CLI tool that users frequently use alongside kubectl. We should consider:\n   - Does k9s respect kubectl context switches?\n   - Should we wrap k9s commands similarly?\n   - How does k9s handle context timeouts?\n\n2. **kubectl Usage Tracking**: We're not currently tracking:\n   - Which kubectl commands are being run\n   - Frequency of context switches\n   - Common usage patterns\n   - Timeout effectiveness\n\n3. **Command Wrapper Architecture**: Current implementation wraps kubectl, but we should evaluate:\n   - Should we use a more generic command wrapper pattern?\n   - Could we wrap multiple tools (kubectl, k9s, helm, etc.)?\n   - Is there a better architectural pattern for context management?\n   - Should this be a plugin/extension system instead?\n\n## Goals\n\n- Research how k9s handles kubectl contexts\n- Evaluate whether to add k9s support\n- Design usage tracking/metrics system\n- Consider architectural refactoring for extensibility\n- Document findings and recommendations\n\n## Considerations\n\n- Maintain backward compatibility\n- Keep the tool focused and not overengineered\n- Consider security/privacy implications of usage tracking\n- Evaluate user value vs. complexity tradeoff","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-05T11:53:55.649046-08:00","updated_at":"2025-11-05T11:53:55.649046-08:00","labels":["architecture","enhancement"]}
